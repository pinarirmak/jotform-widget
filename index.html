<!DOCTYPE html>
<html>
    <head>
    <style type="text/css" media="screen">
#editor {
  position: absolute;
  top: 80px;
  right: 15%;
  bottom: 100px;
  left: 5px;
  height:300px;
}
#input{
color:white;
border: 4px solid #555;
}
</style>
        <script src="//js.jotform.com/JotFormCustomWidget.min.js"></script>
    </head>
    <body>
	<label>Theme:
<select id="ace-theme" size="1">
  <optgroup label="bright">
    <option value="chrome">chrome</option>
    <option value="clouds">clouds</option>
    <option value="crimson_editor">crimson_editor</option>
    <option value="dawn">dawn</option>
    <option value="dreamweaver">Dreamweaver</option>
    <option value="eclipse">eclipse</option>
    <option value="github">GitHub</option>
    <option value="solarized_light">solarized_light</option>
    <option value="textmate">Textmate</option>
    <option value="tomorrow" selected>tomorrow</option>
    <option value="xcode">Xcode</option>
  </optgroup>
  <optgroup label="dark">
    <option value="clouds_midnight">clouds_midnight</option>
    <option value="cobalt">cobalt</option>
    <option value="idle_fingers">idle_fingers</option>
    <option value="kr_theme">kr_theme</option>
    <option value="merbivore">Merbivore</option>
    <option value="merbivore_soft">merbivore_soft</option>
    <option value="mono_industrial">mono_industrial</option>
    <option value="monokai">Molokai</option>
    <option value="pastel_on_dark">pastel_on_dark</option>
    <option value="solarized_dark">solarized_dark</option>
    <option value="terminal">terminal</option>
    <option value="tomorrow_night">tomorrow_night</option>
    <option value="tomorrow_night_blue">tomorrow_night_blue</option>
    <option value="tomorrow_night_bright">tomorrow_night_bright</option>
    <option value="tomorrow_night_eighties">tomorrow_night_eighties</option>
    <option value="twilight">twilight</option>
    <option value="vibrant_ink">vibrant_ink</option>
  </optgroup>
</select>
</label>  
	
    Answer Array: <input id="input" type="text" value="" disabled />

<p>write js code:</p>

<div id="editor">

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.3/ace.js"></script>
<script src="/ace-builds/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="https://raw.githubusercontent.com/ajaxorg/ace/master/api/resources/images/ace_logo.png" /></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"</script>
<script src="//cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"</script>

<script type="text/javascript">
var theme="ace/theme/themes";
var mode="ace/mode/scss";
var editor= ace.edit("editor");
editor.setTheme(theme);
editor.getSession().setMode(mode);


$("#ace-theme").on("change",function(){


});

var param;
JFCustomWidget.subscribe("ready", function(){
    var answer = JFCustomWidget.getWidgetSetting("answerArray");
	var themes = JFCustomWidget.getWidgetSetting("theme");
	editor.setTheme("ace/theme/" + themes.toLowerCase());

    param = answer;
    param = parseArrayInt(param);
    document.getElementById("input").value=answer;  
    JFCustomWidget.subscribe("submit", function(){
        console.log('is valid' , isValid());
        var msg = {
                    
            valid: isValid(),
            value: editor.getValue()
        };
                   
        JFCustomWidget.sendSubmit(msg);
     
    });
});            


function arraysEqual(a, b) {
    if (a == b) return true;
    if (a == null || b == null) return false;
    if (a.length != b.length) return false;



    for (var i = 0; i < a.length; ++i) {
        if (a[i] !== b[i]) return false;
    }
    return true;
}

function parseArrayInt(arr){
    var i = 0;
    for(i = 0;i < arr.length;i++){
        arr[i] = parseInt(arr[i],10);
    }
    return arr;
}

    
var isValid = function (){
    var code = editor.getValue();
	
	console.log(code);

    eval("function a(){"+code+"}");
    
    var isEqual = arraysEqual(param,a());
    return isEqual;
};
    


        </script>
    </body>
</html>
