<!DOCTYPE html>
<html>
    <head>
    <style type="text/css" media="screen">
#editor {
  position: absolute;
  top: 80px;
  right: 15%;
  bottom: 100px;
  left: 5px;
  height:300px;
}
#input{
color:black;
background-color:white;
border: 2px solid ;
}
</style>
        <script src="//js.jotform.com/JotFormCustomWidget.min.js"></script>
    </head>
    <body>
	
 Answer Array: <input id="input" type="text" value="" disabled />
<button onclick="Kronometre.baslat()">Baslat</button> 

<div id="sayac"></div>
<p>write js code:</p>

<div id="editor">


</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.3/ace.js"></script>
<script src="/ace-builds/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="https://raw.githubusercontent.com/ajaxorg/ace/master/api/resources/images/ace_logo.png" /></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"</script>
<script src="//cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"</script>

<script type="text/javascript">
var theme="ace/theme/themes";
var mode="ace/mode/scss";
var editor= ace.edit("editor");
editor.setTheme(theme);
editor.getSession().setMode(mode);

var param;
JFCustomWidget.subscribe("ready", function(){
    var answer = JFCustomWidget.getWidgetSetting("answerArray");
	var themes = JFCustomWidget.getWidgetSetting("theme");
	editor.setTheme("ace/theme/" + themes.toLowerCase());

    param = answer;
    param = parseArrayInt(param);
    document.getElementById("input").value=answer;  
    JFCustomWidget.subscribe("submit", function(){
        console.log('is valid' , isValid());
        var msg = {
                    
            valid: isValid(),
            value: editor.getValue()
        };
                   
        JFCustomWidget.sendSubmit(msg);
     
    });
});      


function Kronometre(Id, Saniye){
  
  this.gercekSaniye = Saniye || 0;
  this.saniye = Saniye || 0;
  this.interval;
  
  this.baslat = function(){
    this.sayacElem = document.getElementById(Id);
    if ( !this.interval ){
      this.sayac();
      this.interval = setInterval(this.sayac.bind(this), 1000);
    }
  };
  
  this.sayac = function(){
    
    var toplamSaniye = this.saniye;
    var saat = parseInt( toplamSaniye / 3600 ) % 24;
    var dakika = parseInt( toplamSaniye / 60 ) % 60;
    var saniye = toplamSaniye % 60;
    
    this.sayacElem.innerHTML = (saat < 10 ? "0" + saat : saat) + ":" + (dakika < 10 ? "0" + dakika : dakika) + ":" + (saniye  < 10 ? "0" + saniye : saniye);
    
    this.saniye += 1;
    
  };
  
  
}

var Kronometre = new Kronometre('sayac');      


function arraysEqual(a, b) {
    if (a == b) return true;
    if (a == null || b == null) return false;
    if (a.length != b.length) return false;



    for (var i = 0; i < a.length; ++i) {
        if (a[i] !== b[i]) return false;
    }
    return true;
}

function parseArrayInt(arr){
    var i = 0;
    for(i = 0;i < arr.length;i++){
        arr[i] = parseInt(arr[i],10);
    }
    return arr;
}

    
var isValid = function (){
    var code = editor.getValue();
	
	console.log(code);

    eval("function a(){"+code+"}");
    
    var isEqual = arraysEqual(param,a());
    return isEqual;
};
    


        </script>
    </body>
</html>
